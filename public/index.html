<html>
  <head>
    <title></title>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
  </head>

  <body>
    Hello, world!!
    <button id="send">send hello</button>

    <script charset="utf-8">
    if('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
        registration.active.postMessage("waiting");
      }).catch(function(err){
        console.log('ServiceWorker registration failed: ', err);
      })
    }

    var s = io.connect(location.origin);

    s.on('connect', function(ev){
      $("#send").on("click", function(ev){
        s.emit('mesg', "hello")
      })

      s.on('mesg', function(data){
        console.log(data);
      })
    });

    </script>

  </body>
</html>
